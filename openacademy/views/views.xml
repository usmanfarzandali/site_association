<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- kanban view of students -->
    <record id="student_kanban" model="ir.ui.view">
      <field name="name">openacademy.student.kanban</field>
      <field name="model">openacademy_student</field>
      <field name="arch" type="xml">
        <kanban>
          <field name="name_seq"/>
          <field name="image"/>
          <field name="teacher_ids"/>
          <field name="student_age"/>
          <templates>
            <t t-name="kanban-box">
              <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_openacademy_student_kanban">
                <!-- <t t-if="record.image.raw_value">
                  <div class="o_kanban_image_fill_left d-none d-md-block" t-attf-style="background-image:url('#{kanban_image('openacademy_student', 'image', record.name_seq.raw_value)}')"/>
                </t> -->
                <t t-if="record.image.raw_value">
                  <!-- <div class="o_kanban_image_fill_left d-none d-md-block" t-attf-style="background-image:url('#{kanban_image('openacademy_student', 'image', record.name_seq.raw_value)}')"/> -->
                  <img t-att-src="kanban_image('openacademy_student', 'image', record.name_seq.raw_value)"/>
                </t>
                <t t-else="">
                  <img class="o_kanban_image" alt="Avatar" t-att-src='_s + "/base/static/img/avatar.png"'/>
                </t>
                <div class="oe_kanban_details">
                  <strong class="o_kanban_record_title"><field name="display_name"/></strong>
                  <div class="o_kanban_tags_section"/>
                  <ul>
                    <li>Age : <field name="student_age"/></li>
                    <li>Teachers : <field name="teacher_ids"/></li>
                  </ul>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <!-- search view of students -->
    <record id="student_search" model="ir.ui.view">
        <field name="name">student.search.view</field>
        <field name="model">openacademy_student</field>
        <field name="arch" type="xml">
          <search string="Students_Search">
            <field name="student_name" filter_domain="['|',('student_name', 'ilike', self), ('name_seq', 'ilike', self)]"/>
                <field name="name_seq"/>
                <field name="student_name"/>
                <!-- for getting the filter based on gender -->
                <separator/>
                <filter string="Male" name="male" domain="[('gender', '=', 'male')]"/>
                <filter string="Female" name="female" domain="[('gender', '=', 'female')]"/>
                <!-- group by based on gender -->
                <group expand="0" string="Group By">
                  <filter string="gender" name="gender" context="{'group_by':'gender'}"/>
                </group>
          </search>
        </field>
    </record>
       

    <!-- inherit id -->
    <record model="ir.ui.view" id="sale_order_inherit">
        <field name="name">sale.order.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
        <!-- customer id position is partner id -->
          <field name="partner_id" position="after">
            <field name="student_name"/>
          </field>
        </field>  
    </record>
    

    <!-- tree view of students -->
    <record id="student_tree" model="ir.ui.view">
            <field name="name">openacademy_student.tree</field>
            <field name="model">openacademy_student</field>
            <field name="arch" type="xml">
                <tree string="Students">
                  <field name="student_name"/>
                  <field name="student_age"/>
                  <field name="student_email"/>
                  <field name="notes"/>
                  <field name="gender"/>
                  <field name="name_seq"/>
                  <field name="image"/>
                  <field name="teacher_ids"/>
                  <field name="course_ids"/>
                </tree>
            </field>
        </record>

    <!-- form view of students -->
    <record id="student_form" model="ir.ui.view">
            <field name="name">openacademy_student.form</field>
            <field name="model">openacademy_student</field>
            <field name="arch" type="xml">
                <form string="Students">
                <!-- status of the students are present inside header before sheet tag -->
                <header>
                  <button id="button_registered" name="action_registered" 
                    string="Set To Registered" class="btn-primary"
                    attrs="{'invisible':[('student_stages','=','registered')]}"
                    type="object"/>
                  <button id="button_undergraduate" name="action_undergraduate" 
                    string="Mark As Undergraduate" class="btn-primary"
                     attrs="{'invisible':[('student_stages','=','undergraduate')]}"
                    type="object"/>
                  <button id="button_graduate" name="action_graduate" string="Mark As Graduate"
                    class="btn-primary"
                     attrs="{'invisible':[('student_stages','=','graduate')]}"
                    type="object"/>
                  <button id="button_masters" name="action_masters" string="Mark As Masters"
                    class="btn-primary"
                    attrs="{'invisible':[('student_stages','=','masters')]}"
                    type="object"/>
                   <button id="button_sendbyemail" name="action_sendbyemail" string="Send By Email"
                    type="object"/>
                  <field name="student_stages" widget="statusbar" statusbar_visible="registered,undergraduate,graduate,masters,phd"/>
                </header>
                <sheet>
                <!--button box for smart buttons on right of the form view-->
                <div class="oe_button_box" name="button_box">
                    <button name="open_student_teachers"
                            type="object" class="oe_stat_button" icon="fa-calendar">
                        <field name="teacher_count" string="Teachers" widget="statinfo"/>
                    </button>
                </div>
                <!-- div tag for sequence -->
                <div class="oe_title">
                    <h1>
                      <field name="name_seq" readonly="1"/>
                    </h1>
                </div>
                    <group>
                      <group>
                        <field name="image" widget="image" class="oe_avatar"/>
                        <field name="student_name"/>
                        <field name="student_age"/>
                        <field name="student_email"/>
                        <field name="course_ids" widget="many2many_tags"/>
                      </group>
                      <group>
                        <field name="gender"/>
                        <field name="notes"/>
                        <field name="age_group"/>
                        <field name="teacher_ids" widget="many2many_tags"/>
                      </group>
                    </group>
                </sheet> 
                <!-- div for chatter box -->
               <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids" options="{'post_refresh': 'recipients'}"/>
                </div>
                </form>
            </field>
        </record>    
  
    

       <!-- action of students menu -->
    <record id="openacademy.action_window" model="ir.actions.act_window">
      <field name="name">Openacademy Student</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">openacademy_student</field>
      <field name="view_mode">tree,kanban,form</field>
      <field name="help" type="html">
        <p>Create First Student!</p>
      </field>
    </record>    


     <!-- top menu item -->
    <menuitem id="openacademy_root" 
    name="OpenAcademy" 
    sequence="2"
    web_icon="openacademy,static/description/icon.png"/>

    
    <!-- menuitem of student -->
    <menuitem id="openacademy_student" 
    name="Student" parent="openacademy_root"
    action="openacademy.action_window"/> 


</odoo>